//helpers.h
//
// This sourcecode file is a part of embroidermodder.
// This program is free software; you can use, redistribute, and/or modify it
// under the terms of the GNU General Puplic License (GPL) as published by
// the Free Software Foundation.  See the file license.txt for details.
// http://embroidermodder.sourceforge.net/
//

#if !defined(HELPERS_H__INCLUDED_)
#define HELPERS_H__INCLUDED_

#define pi 3.1415926535

char *stralloccopy (const char *src);
char *strrealloccopy (char *old_dest, const char *src);
char *flagstotext (int flags);
int round(double src);

// routines to return Nth field out of a comma delimited string
char *split_cell_str(char *line, int field);
double split_cell_double(char *line, int field);
int split_cell_int(char *line, int field);

// a couple double precision classes: point and rectangles
class lfVector {
public:
	double dx,dy;
	lfVector(double x, double y);			// constructor
	lfVector();								// constructor

	double a(void);							// angle (in degrees)
	double l(void);							// length
	double slope(void);						// dy/dx
	class lfVector vector_rotate(double a);	// rotate by angle a
	class lfVector operator*(double c);		// scalar multiply
	CPoint round_vector(void);				// convert to integer CPoint
};

class lfRect {
public:
    double    left;
    double    top;
    double    right;
    double    bottom;

	lfRect(void);							// constructors
	lfRect(double l, double t, double r, double b);

	double width();							// return sizes
	double height();
	bool isin(class lfVector pt);			// is point in rect?  works even if non-normalized
	bool doeslineintersect(class lfVector pta, class lfVector ptb); 
											// does line intersect?  Use for clipping only as
											// a rare false positive is possible (see src comment)
	CRect round_rect(void);					// convert to integer CRect
};


#endif